<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Internal Server Error</title>
    <style>
      body { font-family: Arial, sans-serif; background:#fafafa; color:#333; }
      .container { max-width:800px; margin:60px auto; padding:30px; background:#fff; border-radius:6px; border:1px solid #eee; }
      details { white-space: pre-wrap; background:#f9f9f9; padding:10px; border-radius:4px; margin-top:10px; }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Internal Server Error</h2>
      <p>Sorry â€” something went wrong on the server. The error has been logged and we are investigating.</p>
      {% if error %}
        <details>
          <summary>Show error details (for debugging)</summary>
          {{ error }}
        </details>
      {% endif %}
      {% if show_last_err_instructions %}
        <div style="margin-top:10px;font-size:12px;color:#666;">
          Admins: If you are an authorized operator, you can fetch the full persisted traceback from the server's temporary file using the secure endpoint <code>/__last_error</code> with the environment token (see deployment docs).
          Example: <code>curl -H "X-ERROR-TOKEN: &lt;token&gt;" https://your-site/__last_error</code>
        </div>
      {% endif %}
    </div>
  </body>
  </html>
