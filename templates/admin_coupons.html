{% extends 'base.html' %}
{% block content %}
<style>
    .admin-container { padding: 20px; max-width: 1200px; margin: 0 auto; }
    .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
    .admin-header h2 { margin: 0; color: #333; }
    .btn-add { background: #27ae60; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; font-weight: bold; }
    .btn-add:hover { background: #229954; }
    .coupons-table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .coupons-table th, .coupons-table td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
    .coupons-table th { background: #f9f9f9; font-weight: bold; color: #333; }
    .coupons-table tr:hover { background: #f5f5f5; }
    .badge-active { background: #e6ffed; color: #2e7d32; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
    .badge-inactive { background: #fee; color: #c0392b; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
    .discount-badge { background: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
    .btn-edit, .btn-delete { padding: 6px 12px; border-radius: 4px; text-decoration: none; font-size: 12px; cursor: pointer; border: none; }
    .btn-edit { background: #2196F3; color: white; }
    .btn-edit:hover { background: #1976D2; }
    .btn-delete { background: #c0392b; color: white; margin-left: 5px; }
    .btn-delete:hover { background: #a93226; }
    .empty-state { text-align: center; padding: 40px; color: #666; }
    .empty-state a { color: #27ae60; text-decoration: none; font-weight: bold; }
</style>

<div class="admin-container">
    <div class="admin-header">
        <h2>üéüÔ∏è Coupon Management</h2>
        <a class="btn-add" href="/admin/coupon/new">+ Create Coupon</a>
    </div>

    {% if coupons %}
    <table class="coupons-table">
        <thead>
            <tr>
                <th>Code</th>
                <th>Discount</th>
                <th>Type</th>
                <th>Min Amount</th>
                <th>Uses</th>
                <th>Expiry</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for coupon in coupons %}
            <tr>
                <td><strong>{{ coupon.code }}</strong></td>
                <td>
                    {% if coupon.discount_type == 'percent' %}
                        <span class="discount-badge">{{ coupon.discount_value }}%</span>
                    {% else %}
                        <span class="discount-badge">GH‚Çµ{{ coupon.discount_value }}</span>
                    {% endif %}
                </td>
                <td>{{ coupon.discount_type|title }}</td>
                <td>GH‚Çµ{{ coupon.min_amount }}</td>
                <td>{{ coupon.current_uses }}{% if coupon.max_uses %}/{{ coupon.max_uses }}{% else %}/‚àû{% endif %}</td>
                <td>
                    {% if coupon.expiry_date %}
                        {{ coupon.expiry_date.strftime('%Y-%m-%d') }}
                    {% else %}
                        <em>Never</em>
                    {% endif %}
                </td>
                <td>
                    {% if coupon.is_active %}
                        <span class="badge-active">‚úì Active</span>
                    {% else %}
                        <span class="badge-inactive">‚úó Inactive</span>
                    {% endif %}
                </td>
                <td>
                    <a href="/admin/coupon/edit/{{ coupon.id }}" class="btn-edit">Edit</a>
                    <form action="/admin/coupon/delete/{{ coupon.id }}" method="post" style="display:inline;" onsubmit="return confirm('Delete this coupon?');">
                        <button class="btn-delete" type="submit">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        <p>No coupons yet. <a href="/admin/coupon/new">Create your first coupon</a></p>
    </div>
    {% endif %}
</div>
{% endblock %}
